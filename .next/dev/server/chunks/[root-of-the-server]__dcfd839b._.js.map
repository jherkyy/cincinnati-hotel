{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Jheryk/cincinnati-hotel/app/api/admin/upload-hotel-info/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\r\n\r\nconst N8N_WEBHOOK_URL = process.env.ADMIN_UPLOAD_N8N_WEBHOOK_URL || 'https://your-n8n-instance.com/webhook/upload-hotel-info'\r\nconst MAX_FILE_SIZE = 50 * 1024 * 1024 // 50MB\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const formData = await request.formData()\r\n    const file = formData.get('file') as File | null\r\n\r\n    // Validate file exists\r\n    if (!file) {\r\n      return NextResponse.json({ error: 'No file provided' }, { status: 400 })\r\n    }\r\n\r\n    // Validate file type\r\n    if (file.type !== 'application/pdf') {\r\n      return NextResponse.json({ error: 'Only PDF files are allowed' }, { status: 400 })\r\n    }\r\n\r\n    // Validate file size\r\n    if (file.size > MAX_FILE_SIZE) {\r\n      return NextResponse.json({ error: 'File size exceeds 50MB limit' }, { status: 400 })\r\n    }\r\n\r\n    // Create FormData for n8n webhook\r\n    const n8nFormData = new FormData()\r\n    n8nFormData.append('file', file)\r\n    n8nFormData.append('fileName', file.name)\r\n    n8nFormData.append('fileSize', file.size.toString())\r\n    n8nFormData.append('uploadedAt', new Date().toISOString())\r\n\r\n    // Send to n8n webhook\r\n    const response = await fetch(N8N_WEBHOOK_URL, {\r\n      method: 'POST',\r\n      body: n8nFormData,\r\n    })\r\n\r\n    if (!response.ok) {\r\n      console.error('n8n webhook error:', response.status, await response.text())\r\n      return NextResponse.json({ error: 'Failed to process file' }, { status: 500 })\r\n    }\r\n\r\n    const result = await response.json()\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      message: 'File uploaded successfully',\r\n      fileName: file.name,\r\n      fileSize: file.size,\r\n      n8nResponse: result\r\n    })\r\n\r\n  } catch (error) {\r\n    console.error('Upload error:', error)\r\n    return NextResponse.json({ error: 'Internal server error' }, { status: 500 })\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB,QAAQ,GAAG,CAAC,4BAA4B,IAAI;AACpE,MAAM,gBAAgB,KAAK,OAAO,KAAK,OAAO;;AAEvC,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,WAAW,MAAM,QAAQ,QAAQ;QACvC,MAAM,OAAO,SAAS,GAAG,CAAC;QAE1B,uBAAuB;QACvB,IAAI,CAAC,MAAM;YACT,OAAO,sSAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAmB,GAAG;gBAAE,QAAQ;YAAI;QACxE;QAEA,qBAAqB;QACrB,IAAI,KAAK,IAAI,KAAK,mBAAmB;YACnC,OAAO,sSAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA6B,GAAG;gBAAE,QAAQ;YAAI;QAClF;QAEA,qBAAqB;QACrB,IAAI,KAAK,IAAI,GAAG,eAAe;YAC7B,OAAO,sSAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA+B,GAAG;gBAAE,QAAQ;YAAI;QACpF;QAEA,kCAAkC;QAClC,MAAM,cAAc,IAAI;QACxB,YAAY,MAAM,CAAC,QAAQ;QAC3B,YAAY,MAAM,CAAC,YAAY,KAAK,IAAI;QACxC,YAAY,MAAM,CAAC,YAAY,KAAK,IAAI,CAAC,QAAQ;QACjD,YAAY,MAAM,CAAC,cAAc,IAAI,OAAO,WAAW;QAEvD,sBAAsB;QACtB,MAAM,WAAW,MAAM,MAAM,iBAAiB;YAC5C,QAAQ;YACR,MAAM;QACR;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,QAAQ,KAAK,CAAC,sBAAsB,SAAS,MAAM,EAAE,MAAM,SAAS,IAAI;YACxE,OAAO,sSAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAyB,GAAG;gBAAE,QAAQ;YAAI;QAC9E;QAEA,MAAM,SAAS,MAAM,SAAS,IAAI;QAElC,OAAO,sSAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;YACT,UAAU,KAAK,IAAI;YACnB,UAAU,KAAK,IAAI;YACnB,aAAa;QACf;IAEF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iBAAiB;QAC/B,OAAO,sSAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC7E;AACF"}}]
}